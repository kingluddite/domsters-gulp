function addLoadEvent(e){console.log("owew");var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}function insertAfter(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}function addClass(e,t){e.className?(newClassName=e.className,newClassName+=" ",newClassName+=t,e.className=newClassName):e.className=t}function highlightPage(){if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("navigation"))return!1;for(var e=document.getElementById("navigation"),t=e.getElementsByTagName("a"),n=0;n<t.length;n++){var a=t[n].getAttribute("href"),l=window.location.href;if(l.indexOf(a)!=-1){t[n].className="here";var i=t[n].lastChild.nodeValue.toLowerCase();document.body.setAttribute("id",i)}}}function showSection(e){"use strict";console.log("tes");for(var t=document.getElementsByTagName("div"),n=0;n<t.length;n++)t[n].className.indexOf("section")!==-1&&(t[n].getAttribute("id")!==e?t[n].style.display="none":t[n].style.display="block")}function prepareInternalNav(){"use strict";if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("internal-nav"))return!1;for(var e=document.getElementById("internal-nav"),t=e.getElementsByTagName("a"),n=0;n<t.length;n++){var a=t[n].getAttribute("href").split("#")[1];document.getElementById(a)&&(document.getElementById(a).style.display="none",t[n].destination=a,t[n].onclick=function(){return showSection(this.destination),!1})}}function focusLabels(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("label"),t=0;t<e.length;t++)e[t].getAttribute("for")&&(e[t].onclick=function(){var e=this.getAttribute("for");if(!document.getElementById(e))return!1;var t=document.getElementById(e);t.focus()})}function resetFields(e){for(var t=0;t<e.elements.length;t++){var n=e.elements[t];"submit"!=n.type&&n.defaultValue&&(n.onfocus=function(){this.value==this.defaultValue&&(this.value="")},n.onblur=function(){""==this.value&&(this.value=this.defaultValue)})}}function validateForm(e){for(var t=0;t<e.elements.length;t++){var n=e.elements[t];if(n.className.indexOf("required")!=-1&&!isFilled(n))return alert("Please fill in the "+n.name+" field."),!1;if(n.className.indexOf("email")!=-1&&!isEmail(n))return alert("The "+n.name+" field must be a valid email address."),!1}return!0}function isFilled(e){return!(e.value.length<1||e.value==e.defaultValue)}function isEmail(e){return e.value.indexOf("@")!=-1&&e.value.indexOf(".")!=-1}function prepareForms(){for(var e=0;e<document.forms.length;e++){var t=document.forms[e];resetFields(t),t.onsubmit=function(){return validateForm(this)}}}function moveElement(e,t,n,a){"use strict";var l,i,r,o,d;return!!document.getElementById&&(!!document.getElementById(e)&&(l=document.getElementById(e),l.movement&&clearTimeout(l.movement),l.style.left||(l.style.left="0px"),l.style.top||(l.style.top="0px"),i=parseInt(l.style.left),r=parseInt(l.style.top),i===t&&r===n||(i<t&&(o=Math.ceil((t-i)/10),i+=o),i>t&&(o=Math.ceil((i-t)/10),i-=o),r<n&&(o=Math.ceil((n-r)/10),r+=o),r>n&&(o=Math.ceil((r-n)/10),r-=o),l.style.left=i+"px",l.style.top=r+"px",d="moveElement('"+e+"',"+t+","+n+","+a+")",void(l.movement=setTimeout(d,a)))))}function prepareSlideshow(){"use strict";var e,t,n,a,l;if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("intro"))return!1;e=document.getElementById("intro"),t=document.createElement("div"),t.setAttribute("id","slideshow"),n=document.createElement("img"),n.setAttribute("src","img/frame.gif"),n.setAttribute("alt",""),n.setAttribute("id","frame"),t.appendChild(n),a=document.createElement("img"),a.setAttribute("src","img/slideshow.gif"),a.setAttribute("alt","a glimpse of what awaits you"),a.setAttribute("id","preview"),t.appendChild(a),insertAfter(t,e),l=document.getElementsByTagName("a");for(var i=0;i<l.length;i++)l[i].onmouseover=function(){var e=this.getAttribute("href");e.indexOf("index.html")!==-1&&moveElement("preview",0,0,5),e.indexOf("about.html")!==-1&&moveElement("preview",-150,0,5),e.indexOf("photos.html")!==-1&&moveElement("preview",-300,0,5),e.indexOf("live.html")!==-1&&moveElement("preview",-450,0,5),e.indexOf("contact.html")!==-1&&moveElement("preview",-600,0,5)}}function stripeTables(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("table"),t=0;t<e.length;t++)for(var n=!1,a=e[t].getElementsByTagName("tr"),l=0;l<a.length;l++)1==n?(addClass(a[l],"odd"),n=!1):n=!0}function highlightRows(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("tr"),t=0;t<e.length;t++)e[t].oldClassName=e[t].className,e[t].onmouseover=function(){addClass(this,"highlight")},e[t].onmouseout=function(){this.className=this.oldClassName}}function displayAbbreviations(){if(!document.getElementsByTagName||!document.createElement||!document.createTextNode)return!1;var e=document.getElementsByTagName("abbr");if(e.length<1)return!1;for(var t=new Array,n=0;n<e.length;n++){var a=e[n];if(!(a.childNodes.length<1)){var l=a.getAttribute("title"),i=a.lastChild.nodeValue;t[i]=l}}var r=document.createElement("dl");for(i in t){var l=t[i],o=document.createElement("dt"),d=document.createTextNode(i);o.appendChild(d);var m=document.createElement("dd"),s=document.createTextNode(l);m.appendChild(s),r.appendChild(o),r.appendChild(m)}if(r.childNodes.length<1)return!1;var u=document.createElement("h3"),c=document.createTextNode("Abbreviations");u.appendChild(c);var g=document.getElementById("content");g.appendChild(u),g.appendChild(r)}function showPic(e){"use strict";var t,n,a,l;return!document.getElementById("placeholder")||(t=e.getAttribute("href"),n=document.getElementById("placeholder"),n.setAttribute("src",t),!!document.getElementById("description")&&(a=e.getAttribute("title")?e.getAttribute("title"):"",l=document.getElementById("description"),3===l.firstChild.nodeType&&(l.firstChild.nodeValue=a),!1))}function preparePlaceholder(){"use strict";var e,t,n,a;return!!document.createElement&&(!!document.createTextNode&&(!!document.getElementById&&(!!document.getElementById("image-gallery")&&(e=document.createElement("img"),e.setAttribute("id","placeholder"),e.setAttribute("src","img/placeholder.gif"),e.setAttribute("alt","my image gallery"),t=document.createElement("p"),t.setAttribute("id","description"),n=document.createTextNode("Choose an image"),t.appendChild(n),a=document.getElementById("image-gallery"),insertAfter(t,a),void insertAfter(e,t)))))}function prepareGallery(){"use strict";var e,t;if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("image-gallery"))return!1;e=document.getElementById("image-gallery"),t=e.getElementsByTagName("a");for(var n=0;n<t.length;n++)t[n].onclick=function(){return showPic(this)}}addLoadEvent(highlightPage),addLoadEvent(prepareInternalNav),addLoadEvent(focusLabels),addLoadEvent(prepareForms),addLoadEvent(prepareSlideshow),addLoadEvent(stripeTables),addLoadEvent(highlightRows),addLoadEvent(displayAbbreviations),addLoadEvent(preparePlaceholder),addLoadEvent(prepareGallery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImluZGV4LmpzIiwibGl2ZS5qcyIsInBob3Rvcy5qcyJdLCJuYW1lcyI6WyJhZGRMb2FkRXZlbnQiLCJmdW5jIiwiY29uc29sZSIsImxvZyIsIm9sZG9ubG9hZCIsIndpbmRvdyIsIm9ubG9hZCIsImluc2VydEFmdGVyIiwibmV3RWxlbWVudCIsInRhcmdldEVsZW1lbnQiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibGFzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsImFkZENsYXNzIiwiZWxlbWVudCIsInZhbHVlIiwiY2xhc3NOYW1lIiwibmV3Q2xhc3NOYW1lIiwiaGlnaGxpZ2h0UGFnZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsIm5hdiIsImxpbmtzIiwiaSIsImxlbmd0aCIsImxpbmt1cmwiLCJnZXRBdHRyaWJ1dGUiLCJjdXJyZW50dXJsIiwibG9jYXRpb24iLCJocmVmIiwiaW5kZXhPZiIsImxpbmt0ZXh0Iiwibm9kZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJib2R5Iiwic2V0QXR0cmlidXRlIiwic2hvd1NlY3Rpb24iLCJpZCIsImRpdnMiLCJzdHlsZSIsImRpc3BsYXkiLCJwcmVwYXJlSW50ZXJuYWxOYXYiLCJzZWN0aW9uSWQiLCJzcGxpdCIsImRlc3RpbmF0aW9uIiwib25jbGljayIsInRoaXMiLCJmb2N1c0xhYmVscyIsImxhYmVscyIsImZvY3VzIiwicmVzZXRGaWVsZHMiLCJ3aGljaGZvcm0iLCJlbGVtZW50cyIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJvbmZvY3VzIiwib25ibHVyIiwidmFsaWRhdGVGb3JtIiwiaXNGaWxsZWQiLCJhbGVydCIsIm5hbWUiLCJpc0VtYWlsIiwiZmllbGQiLCJwcmVwYXJlRm9ybXMiLCJmb3JtcyIsInRoaXNmb3JtIiwib25zdWJtaXQiLCJtb3ZlRWxlbWVudCIsImVsZW1lbnRJRCIsImZpbmFsWCIsImZpbmFsWSIsImludGVydmFsIiwiZWxlbSIsInhQb3MiLCJ5UG9zIiwiZGlzdCIsInJlcGVhdCIsIm1vdmVtZW50IiwiY2xlYXJUaW1lb3V0IiwibGVmdCIsInRvcCIsInBhcnNlSW50IiwiTWF0aCIsImNlaWwiLCJzZXRUaW1lb3V0IiwicHJlcGFyZVNsaWRlc2hvdyIsImludHJvIiwic2xpZGVzaG93IiwiZnJhbWUiLCJwcmV2aWV3IiwiY3JlYXRlRWxlbWVudCIsIm9ubW91c2VvdmVyIiwic3RyaXBlVGFibGVzIiwidGFibGVzIiwib2RkIiwicm93cyIsImoiLCJoaWdobGlnaHRSb3dzIiwib2xkQ2xhc3NOYW1lIiwib25tb3VzZW91dCIsImRpc3BsYXlBYmJyZXZpYXRpb25zIiwiY3JlYXRlVGV4dE5vZGUiLCJhYmJyZXZpYXRpb25zIiwiZGVmcyIsIkFycmF5IiwiY3VycmVudF9hYmJyIiwiY2hpbGROb2RlcyIsImRlZmluaXRpb24iLCJrZXkiLCJkbGlzdCIsImR0aXRsZSIsImR0aXRsZV90ZXh0IiwiZGRlc2MiLCJkZGVzY190ZXh0IiwiaGVhZGVyIiwiaGVhZGVyX3RleHQiLCJjb250YWluZXIiLCJzaG93UGljIiwid2hpY2hwaWMiLCJzb3VyY2UiLCJwbGFjZWhvbGRlciIsInRleHQiLCJkZXNjcmlwdGlvbiIsImZpcnN0Q2hpbGQiLCJub2RlVHlwZSIsInByZXBhcmVQbGFjZWhvbGRlciIsImRlc2NUZXh0IiwiZ2FsbGVyeSIsInByZXBhcmVHYWxsZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxjQUFBQyxHQUNBQyxRQUFBQyxJQUFBLE9BQ0EsSUFBQUMsR0FBQUMsT0FBQUMsTUFDQSxtQkFBQUQsUUFBQUMsT0FDQUQsT0FBQUMsT0FBQUwsRUFFQUksT0FBQUMsT0FBQSxXQUNBRixJQUNBSCxLQUtBLFFBQUFNLGFBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsVUFDQUQsR0FBQUUsV0FBQUgsRUFDQUMsRUFBQUcs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Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFkZExvYWRFdmVudCggZnVuYyApIHtcbiAgY29uc29sZS5sb2coJ293ZXcnKTtcbiAgdmFyIG9sZG9ubG9hZCA9IHdpbmRvdy5vbmxvYWQ7XG4gIGlmICggdHlwZW9mIHdpbmRvdy5vbmxvYWQgIT0gJ2Z1bmN0aW9uJyApIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuYztcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBvbGRvbmxvYWQoKTtcbiAgICAgIGZ1bmMoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoIG5ld0VsZW1lbnQsIHRhcmdldEVsZW1lbnQgKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudE5vZGU7XG4gIGlmICggcGFyZW50Lmxhc3RDaGlsZCA9PSB0YXJnZXRFbGVtZW50ICkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCggbmV3RWxlbWVudCApO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoIG5ld0VsZW1lbnQsIHRhcmdldEVsZW1lbnQubmV4dFNpYmxpbmcgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyggZWxlbWVudCwgdmFsdWUgKSB7XG4gIGlmICggIWVsZW1lbnQuY2xhc3NOYW1lICkge1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgbmV3Q2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7XG4gICAgbmV3Q2xhc3NOYW1lICs9IFwiIFwiO1xuICAgIG5ld0NsYXNzTmFtZSArPSB2YWx1ZTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IG5ld0NsYXNzTmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRQYWdlKCkge1xuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSApIHJldHVybiBmYWxzZTtcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKSByZXR1cm4gZmFsc2U7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcIm5hdmlnYXRpb25cIiApICkgcmV0dXJuIGZhbHNlO1xuICB2YXIgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwibmF2aWdhdGlvblwiICk7XG4gIHZhciBsaW5rcyA9IG5hdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJhXCIgKTtcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIGxpbmt1cmwgPSBsaW5rc1sgaSBdLmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKTtcbiAgICB2YXIgY3VycmVudHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGlmICggY3VycmVudHVybC5pbmRleE9mKCBsaW5rdXJsICkgIT0gLTEgKSB7XG4gICAgICBsaW5rc1sgaSBdLmNsYXNzTmFtZSA9IFwiaGVyZVwiO1xuICAgICAgdmFyIGxpbmt0ZXh0ID0gbGlua3NbIGkgXS5sYXN0Q2hpbGQubm9kZVZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSggXCJpZFwiLCBsaW5rdGV4dCApO1xuICAgIH1cbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoIGhpZ2hsaWdodFBhZ2UgKTtcbiIsImZ1bmN0aW9uIHNob3dTZWN0aW9uKCBpZCApIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBjb25zb2xlLmxvZygndGVzJyk7XG4gIHZhciBkaXZzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdkaXYnICk7XG4gIGZvciAoIHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyBpKysgKSB7XG4gICAgaWYgKCBkaXZzWyBpIF0uY2xhc3NOYW1lLmluZGV4T2YoICdzZWN0aW9uJyApID09PSAtMSApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoIGRpdnNbIGkgXS5nZXRBdHRyaWJ1dGUoICdpZCcgKSAhPT0gaWQgKSB7XG4gICAgICBkaXZzWyBpIF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgZGl2c1sgaSBdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcmVwYXJlSW50ZXJuYWxOYXYoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ludGVybmFsLW5hdicgKSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnaW50ZXJuYWwtbmF2JyApO1xuICB2YXIgbGlua3MgPSBuYXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdhJyApO1xuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKyApIHtcbiAgICB2YXIgc2VjdGlvbklkID0gbGlua3NbIGkgXS5nZXRBdHRyaWJ1dGUoICdocmVmJyApLnNwbGl0KCAnIycgKVsgMSBdO1xuICAgIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBzZWN0aW9uSWQgKSApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggc2VjdGlvbklkICkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBsaW5rc1sgaSBdLmRlc3RpbmF0aW9uID0gc2VjdGlvbklkO1xuICAgIGxpbmtzWyBpIF0ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2hvd1NlY3Rpb24oIHRoaXMuZGVzdGluYXRpb24gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICB9XG59XG5cbmFkZExvYWRFdmVudCggcHJlcGFyZUludGVybmFsTmF2ICk7XG4iLCJmdW5jdGlvbiBmb2N1c0xhYmVscygpIHtcbiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgbGFiZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsYWJlbFwiKTtcbiAgZm9yICh2YXIgaT0wOyBpPGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgIGlmICghbGFiZWxzW2ldLmdldEF0dHJpYnV0ZShcImZvclwiKSkgY29udGludWU7XG4gICAgbGFiZWxzW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZm9yXCIpO1xuICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNldEZpZWxkcyh3aGljaGZvcm0pIHtcbiAgZm9yICh2YXIgaT0wOyBpPHdoaWNoZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbGVtZW50ID0gd2hpY2hmb3JtLmVsZW1lbnRzW2ldO1xuICAgIGlmIChlbGVtZW50LnR5cGUgPT0gXCJzdWJtaXRcIikgY29udGludWU7XG4gICAgaWYgKCFlbGVtZW50LmRlZmF1bHRWYWx1ZSkgY29udGludWU7XG4gICAgZWxlbWVudC5vbmZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT0gdGhpcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnQub25ibHVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKHdoaWNoZm9ybSkge1xuICBmb3IgKHZhciBpPTA7IGk8d2hpY2hmb3JtLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSB3aGljaGZvcm0uZWxlbWVudHNbaV07XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoXCJyZXF1aXJlZFwiKSAhPSAtMSkge1xuICAgICAgaWYgKCFpc0ZpbGxlZChlbGVtZW50KSkge1xuICAgICAgICBhbGVydChcIlBsZWFzZSBmaWxsIGluIHRoZSBcIitlbGVtZW50Lm5hbWUrXCIgZmllbGQuXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKFwiZW1haWxcIikgIT0gLTEpIHtcbiAgICAgIGlmICghaXNFbWFpbChlbGVtZW50KSkge1xuICAgICAgICBhbGVydChcIlRoZSBcIitlbGVtZW50Lm5hbWUrXCIgZmllbGQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc0ZpbGxlZChmaWVsZCkge1xuICBpZiAoZmllbGQudmFsdWUubGVuZ3RoIDwgMSB8fCBmaWVsZC52YWx1ZSA9PSBmaWVsZC5kZWZhdWx0VmFsdWUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNFbWFpbChmaWVsZCkge1xuICBpZiAoZmllbGQudmFsdWUuaW5kZXhPZihcIkBcIikgPT0gLTEgfHwgZmllbGQudmFsdWUuaW5kZXhPZihcIi5cIikgPT0gLTEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlcGFyZUZvcm1zKCkge1xuICBmb3IgKHZhciBpPTA7IGk8ZG9jdW1lbnQuZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGhpc2Zvcm0gPSBkb2N1bWVudC5mb3Jtc1tpXTtcbiAgICByZXNldEZpZWxkcyh0aGlzZm9ybSk7XG4gICAgdGhpc2Zvcm0ub25zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUZvcm0odGhpcyk7XG4gICAgfVxuICB9XG59XG5cbmFkZExvYWRFdmVudChmb2N1c0xhYmVscyk7XG5hZGRMb2FkRXZlbnQocHJlcGFyZUZvcm1zKTsiLCJmdW5jdGlvbiBtb3ZlRWxlbWVudCggZWxlbWVudElELCBmaW5hbFgsIGZpbmFsWSwgaW50ZXJ2YWwgKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIGVsZW0sIHhQb3MsIHlQb3MsIGRpc3QsIHJlcGVhdDtcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBlbGVtZW50SUQgKSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBlbGVtZW50SUQgKTtcbiAgaWYgKCBlbGVtLm1vdmVtZW50ICkge1xuICAgIGNsZWFyVGltZW91dCggZWxlbS5tb3ZlbWVudCApO1xuICB9XG4gIGlmICggIWVsZW0uc3R5bGUubGVmdCApIHtcbiAgICBlbGVtLnN0eWxlLmxlZnQgPSAnMHB4JztcbiAgfVxuICBpZiAoICFlbGVtLnN0eWxlLnRvcCApIHtcbiAgICBlbGVtLnN0eWxlLnRvcCA9ICcwcHgnO1xuICB9XG4gIHhQb3MgPSBwYXJzZUludCggZWxlbS5zdHlsZS5sZWZ0ICk7XG4gIHlQb3MgPSBwYXJzZUludCggZWxlbS5zdHlsZS50b3AgKTtcbiAgaWYgKCB4UG9zID09PSBmaW5hbFggJiYgeVBvcyA9PT0gZmluYWxZICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICggeFBvcyA8IGZpbmFsWCApIHtcbiAgICBkaXN0ID0gTWF0aC5jZWlsKCAoIGZpbmFsWCAtIHhQb3MgKSAvIDEwICk7XG4gICAgeFBvcyA9IHhQb3MgKyBkaXN0O1xuICB9XG4gIGlmICggeFBvcyA+IGZpbmFsWCApIHtcbiAgICBkaXN0ID0gTWF0aC5jZWlsKCAoIHhQb3MgLSBmaW5hbFggKSAvIDEwICk7XG4gICAgeFBvcyA9IHhQb3MgLSBkaXN0O1xuICB9XG4gIGlmICggeVBvcyA8IGZpbmFsWSApIHtcbiAgICBkaXN0ID0gTWF0aC5jZWlsKCAoIGZpbmFsWSAtIHlQb3MgKSAvIDEwICk7XG4gICAgeVBvcyA9IHlQb3MgKyBkaXN0O1xuICB9XG4gIGlmICggeVBvcyA+IGZpbmFsWSApIHtcbiAgICBkaXN0ID0gTWF0aC5jZWlsKCAoIHlQb3MgLSBmaW5hbFkgKSAvIDEwICk7XG4gICAgeVBvcyA9IHlQb3MgLSBkaXN0O1xuICB9XG4gIGVsZW0uc3R5bGUubGVmdCA9IHhQb3MgKyAncHgnO1xuICBlbGVtLnN0eWxlLnRvcCA9IHlQb3MgKyAncHgnO1xuICByZXBlYXQgPSBcIm1vdmVFbGVtZW50KCdcIiArIGVsZW1lbnRJRCArIFwiJyxcIiArIGZpbmFsWCArIFwiLFwiICsgZmluYWxZICsgXCIsXCIgKyBpbnRlcnZhbCArIFwiKVwiO1xuICBlbGVtLm1vdmVtZW50ID0gc2V0VGltZW91dCggcmVwZWF0LCBpbnRlcnZhbCApO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlU2xpZGVzaG93KCkge1xuICAndXNlIHN0cmljdCc7XG4gIHZhciBpbnRybywgc2xpZGVzaG93LCBmcmFtZSwgcHJldmlldywgbGlua3M7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwiaW50cm9cIiApICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpbnRybyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnaW50cm8nICk7XG4gIHNsaWRlc2hvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG4gIHNsaWRlc2hvdy5zZXRBdHRyaWJ1dGUoICdpZCcsICdzbGlkZXNob3cnICk7XG4gIGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2ltZycgKTtcbiAgZnJhbWUuc2V0QXR0cmlidXRlKCAnc3JjJywgJ2ltZy9mcmFtZS5naWYnICk7XG4gIGZyYW1lLnNldEF0dHJpYnV0ZSggJ2FsdCcsICcnICk7XG4gIGZyYW1lLnNldEF0dHJpYnV0ZSggJ2lkJywgJ2ZyYW1lJyApO1xuICBzbGlkZXNob3cuYXBwZW5kQ2hpbGQoIGZyYW1lICk7XG4gIHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaW1nJyApO1xuICBwcmV2aWV3LnNldEF0dHJpYnV0ZSggJ3NyYycsICdpbWcvc2xpZGVzaG93LmdpZicgKTtcbiAgcHJldmlldy5zZXRBdHRyaWJ1dGUoICdhbHQnLCAnYSBnbGltcHNlIG9mIHdoYXQgYXdhaXRzIHlvdScgKTtcbiAgcHJldmlldy5zZXRBdHRyaWJ1dGUoICdpZCcsICdwcmV2aWV3JyApO1xuICBzbGlkZXNob3cuYXBwZW5kQ2hpbGQoIHByZXZpZXcgKTtcbiAgaW5zZXJ0QWZ0ZXIoIHNsaWRlc2hvdywgaW50cm8gKTtcbiAgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2EnICk7XG4gIGZvciAoIHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrICkge1xuICAgIGxpbmtzWyBpIF0ub25tb3VzZW92ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKCAnaHJlZicgKTtcbiAgICAgIGlmICggZGVzdGluYXRpb24uaW5kZXhPZiggJ2luZGV4Lmh0bWwnICkgIT09IC0xICkge1xuICAgICAgICBtb3ZlRWxlbWVudCggJ3ByZXZpZXcnLCAwLCAwLCA1ICk7XG4gICAgICB9XG4gICAgICBpZiAoIGRlc3RpbmF0aW9uLmluZGV4T2YoICdhYm91dC5odG1sJyApICE9PSAtMSApIHtcbiAgICAgICAgbW92ZUVsZW1lbnQoICdwcmV2aWV3JywgLTE1MCwgMCwgNSApO1xuICAgICAgfVxuICAgICAgaWYgKCBkZXN0aW5hdGlvbi5pbmRleE9mKCAncGhvdG9zLmh0bWwnICkgIT09IC0xICkge1xuICAgICAgICBtb3ZlRWxlbWVudCggJ3ByZXZpZXcnLCAtMzAwLCAwLCA1ICk7XG4gICAgICB9XG4gICAgICBpZiAoIGRlc3RpbmF0aW9uLmluZGV4T2YoICdsaXZlLmh0bWwnICkgIT09IC0xICkge1xuICAgICAgICBtb3ZlRWxlbWVudCggJ3ByZXZpZXcnLCAtNDUwLCAwLCA1ICk7XG4gICAgICB9XG4gICAgICBpZiAoIGRlc3RpbmF0aW9uLmluZGV4T2YoICdjb250YWN0Lmh0bWwnICkgIT09IC0xICkge1xuICAgICAgICBtb3ZlRWxlbWVudCggJ3ByZXZpZXcnLCAtNjAwLCAwLCA1ICk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoIHByZXBhcmVTbGlkZXNob3cgKTtcbiIsImZ1bmN0aW9uIHN0cmlwZVRhYmxlcygpIHtcbiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgdGFibGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWJsZVwiKTtcbiAgZm9yICh2YXIgaT0wOyBpPHRhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvZGQgPSBmYWxzZTtcbiAgICB2YXIgcm93cyA9IHRhYmxlc1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRyXCIpO1xuICAgIGZvciAodmFyIGo9MDsgajxyb3dzLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAob2RkID09IHRydWUpIHtcbiAgICAgICAgYWRkQ2xhc3Mocm93c1tqXSxcIm9kZFwiKTtcbiAgICAgICAgb2RkID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvZGQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRSb3dzKCkge1xuICBpZighZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHJldHVybiBmYWxzZTtcbiAgdmFyIHJvd3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRyXCIpO1xuICBmb3IgKHZhciBpPTA7IGk8cm93cy5sZW5ndGg7IGkrKykge1xuICAgIHJvd3NbaV0ub2xkQ2xhc3NOYW1lID0gcm93c1tpXS5jbGFzc05hbWVcbiAgICByb3dzW2ldLm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBhZGRDbGFzcyh0aGlzLFwiaGlnaGxpZ2h0XCIpO1xuICAgIH1cbiAgICByb3dzW2ldLm9ubW91c2VvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5vbGRDbGFzc05hbWVcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheUFiYnJldmlhdGlvbnMoKSB7XG4gIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgfHwgIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgfHwgIWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKSByZXR1cm4gZmFsc2U7XG4gIHZhciBhYmJyZXZpYXRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhYmJyXCIpO1xuICBpZiAoYWJicmV2aWF0aW9ucy5sZW5ndGggPCAxKSByZXR1cm4gZmFsc2U7XG4gIHZhciBkZWZzID0gbmV3IEFycmF5KCk7XG4gIGZvciAodmFyIGk9MDsgaTxhYmJyZXZpYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGN1cnJlbnRfYWJiciA9IGFiYnJldmlhdGlvbnNbaV07XG4gICAgaWYgKGN1cnJlbnRfYWJici5jaGlsZE5vZGVzLmxlbmd0aCA8IDEpIGNvbnRpbnVlO1xuICAgIHZhciBkZWZpbml0aW9uID0gY3VycmVudF9hYmJyLmdldEF0dHJpYnV0ZShcInRpdGxlXCIpO1xuICAgIHZhciBrZXkgPSBjdXJyZW50X2FiYnIubGFzdENoaWxkLm5vZGVWYWx1ZTtcbiAgICBkZWZzW2tleV0gPSBkZWZpbml0aW9uO1xuICB9XG4gIHZhciBkbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkbFwiKTtcbiAgZm9yIChrZXkgaW4gZGVmcykge1xuICAgIHZhciBkZWZpbml0aW9uID0gZGVmc1trZXldO1xuICAgIHZhciBkdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZHRcIik7XG4gICAgdmFyIGR0aXRsZV90ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoa2V5KTtcbiAgICBkdGl0bGUuYXBwZW5kQ2hpbGQoZHRpdGxlX3RleHQpO1xuICAgIHZhciBkZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkZFwiKTtcbiAgICB2YXIgZGRlc2NfdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRlZmluaXRpb24pO1xuICAgIGRkZXNjLmFwcGVuZENoaWxkKGRkZXNjX3RleHQpO1xuICAgIGRsaXN0LmFwcGVuZENoaWxkKGR0aXRsZSk7XG4gICAgZGxpc3QuYXBwZW5kQ2hpbGQoZGRlc2MpO1xuICB9XG4gIGlmIChkbGlzdC5jaGlsZE5vZGVzLmxlbmd0aCA8IDEpIHJldHVybiBmYWxzZTtcbiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgdmFyIGhlYWRlcl90ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJBYmJyZXZpYXRpb25zXCIpO1xuICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyX3RleHQpO1xuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRsaXN0KTtcbn1cblxuYWRkTG9hZEV2ZW50KHN0cmlwZVRhYmxlcyk7XG5hZGRMb2FkRXZlbnQoaGlnaGxpZ2h0Um93cyk7XG5hZGRMb2FkRXZlbnQoZGlzcGxheUFiYnJldmlhdGlvbnMpOyIsImZ1bmN0aW9uIHNob3dQaWMoIHdoaWNocGljICkge1xuICAndXNlIHN0cmljdCc7XG4gIHZhciBzb3VyY2UsIHBsYWNlaG9sZGVyLCB0ZXh0LCBkZXNjcmlwdGlvbjtcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdwbGFjZWhvbGRlcicgKSApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBzb3VyY2UgPSB3aGljaHBpYy5nZXRBdHRyaWJ1dGUoICdocmVmJyApO1xuICBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAncGxhY2Vob2xkZXInICk7XG4gIHBsYWNlaG9sZGVyLnNldEF0dHJpYnV0ZSggJ3NyYycsIHNvdXJjZSApO1xuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2Rlc2NyaXB0aW9uJyApICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIHdoaWNocGljLmdldEF0dHJpYnV0ZSggJ3RpdGxlJyApICkge1xuICAgIHRleHQgPSB3aGljaHBpYy5nZXRBdHRyaWJ1dGUoICd0aXRsZScgKTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gJyc7XG4gIH1cbiAgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2Rlc2NyaXB0aW9uJyApO1xuICBpZiAoIGRlc2NyaXB0aW9uLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDMgKSB7XG4gICAgZGVzY3JpcHRpb24uZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSB0ZXh0O1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcHJlcGFyZVBsYWNlaG9sZGVyKCkge1xuICAndXNlIHN0cmljdCc7XG4gIHZhciBwbGFjZWhvbGRlciwgZGVzY3JpcHRpb24sIGRlc2NUZXh0LCBnYWxsZXJ5O1xuICBpZiAoICFkb2N1bWVudC5jcmVhdGVFbGVtZW50ICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnaW1hZ2UtZ2FsbGVyeScgKSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaW1nJyApO1xuICBwbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoICdpZCcsICdwbGFjZWhvbGRlcicgKTtcbiAgcGxhY2Vob2xkZXIuc2V0QXR0cmlidXRlKCAnc3JjJywgJ2ltZy9wbGFjZWhvbGRlci5naWYnICk7XG4gIHBsYWNlaG9sZGVyLnNldEF0dHJpYnV0ZSggJ2FsdCcsICdteSBpbWFnZSBnYWxsZXJ5JyApO1xuICBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdwJyApO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoICdpZCcsICdkZXNjcmlwdGlvbicgKTtcbiAgZGVzY1RleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggJ0Nob29zZSBhbiBpbWFnZScgKTtcbiAgZGVzY3JpcHRpb24uYXBwZW5kQ2hpbGQoIGRlc2NUZXh0ICk7XG4gIGdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ltYWdlLWdhbGxlcnknICk7XG4gIGluc2VydEFmdGVyKCBkZXNjcmlwdGlvbiwgZ2FsbGVyeSApO1xuICBpbnNlcnRBZnRlciggcGxhY2Vob2xkZXIsIGRlc2NyaXB0aW9uICk7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVHYWxsZXJ5KCkge1xuICAndXNlIHN0cmljdCc7XG4gIHZhciBnYWxsZXJ5LCBsaW5rcztcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ltYWdlLWdhbGxlcnknICkgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGdhbGxlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ltYWdlLWdhbGxlcnknICk7XG4gIGxpbmtzID0gZ2FsbGVyeS5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2EnICk7XG4gIGZvciAoIHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrICkge1xuICAgIGxpbmtzWyBpIF0ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNob3dQaWMoIHRoaXMgKTtcbiAgICB9O1xuICB9XG59XG5cbmFkZExvYWRFdmVudCggcHJlcGFyZVBsYWNlaG9sZGVyICk7XG5hZGRMb2FkRXZlbnQoIHByZXBhcmVHYWxsZXJ5ICk7XG4iXX0=

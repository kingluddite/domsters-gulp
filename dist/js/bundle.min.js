function addLoadEvent(e){console.log("owew");var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}function insertAfter(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}function addClass(e,t){e.className?(newClassName=e.className,newClassName+=" ",newClassName+=t,e.className=newClassName):e.className=t}function highlightPage(){if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("navigation"))return!1;for(var e=document.getElementById("navigation"),t=e.getElementsByTagName("a"),n=0;n<t.length;n++){var a=t[n].getAttribute("href"),l=window.location.href;if(l.indexOf(a)!=-1){t[n].className="here";var i=t[n].lastChild.nodeValue.toLowerCase();document.body.setAttribute("id",i)}}}function showSection(e){"use strict";console.log("test");for(var t=document.getElementsByTagName("div"),n=0;n<t.length;n++)t[n].className.indexOf("section")!==-1&&(t[n].getAttribute("id")!==e?t[n].style.display="none":t[n].style.display="block")}function prepareInternalNav(){"use strict";if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("internal-nav"))return!1;for(var e=document.getElementById("internal-nav"),t=e.getElementsByTagName("a"),n=0;n<t.length;n++){var a=t[n].getAttribute("href").split("#")[1];document.getElementById(a)&&(document.getElementById(a).style.display="none",t[n].destination=a,t[n].onclick=function(){return showSection(this.destination),!1})}}function focusLabels(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("label"),t=0;t<e.length;t++)e[t].getAttribute("for")&&(e[t].onclick=function(){var e=this.getAttribute("for");if(!document.getElementById(e))return!1;var t=document.getElementById(e);t.focus()})}function resetFields(e){for(var t=0;t<e.elements.length;t++){var n=e.elements[t];"submit"!=n.type&&n.defaultValue&&(n.onfocus=function(){this.value==this.defaultValue&&(this.value="")},n.onblur=function(){""==this.value&&(this.value=this.defaultValue)})}}function validateForm(e){for(var t=0;t<e.elements.length;t++){var n=e.elements[t];if(n.className.indexOf("required")!=-1&&!isFilled(n))return alert("Please fill in the "+n.name+" field."),!1;if(n.className.indexOf("email")!=-1&&!isEmail(n))return alert("The "+n.name+" field must be a valid email address."),!1}return!0}function isFilled(e){return!(e.value.length<1||e.value==e.defaultValue)}function isEmail(e){return e.value.indexOf("@")!=-1&&e.value.indexOf(".")!=-1}function prepareForms(){for(var e=0;e<document.forms.length;e++){var t=document.forms[e];resetFields(t),t.onsubmit=function(){return validateForm(this)}}}function moveElement(e,t,n,a){"use strict";var l,i,r,o,d;return!!document.getElementById&&(!!document.getElementById(e)&&(l=document.getElementById(e),l.movement&&clearTimeout(l.movement),l.style.left||(l.style.left="0px"),l.style.top||(l.style.top="0px"),i=parseInt(l.style.left),r=parseInt(l.style.top),i===t&&r===n||(i<t&&(o=Math.ceil((t-i)/10),i+=o),i>t&&(o=Math.ceil((i-t)/10),i-=o),r<n&&(o=Math.ceil((n-r)/10),r+=o),r>n&&(o=Math.ceil((r-n)/10),r-=o),l.style.left=i+"px",l.style.top=r+"px",d="moveElement('"+e+"',"+t+","+n+","+a+")",void(l.movement=setTimeout(d,a)))))}function prepareSlideshow(){"use strict";var e,t,n,a,l;if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("intro"))return!1;e=document.getElementById("intro"),t=document.createElement("div"),t.setAttribute("id","slideshow"),n=document.createElement("img"),n.setAttribute("src","img/frame.gif"),n.setAttribute("alt",""),n.setAttribute("id","frame"),t.appendChild(n),a=document.createElement("img"),a.setAttribute("src","img/slideshow.gif"),a.setAttribute("alt","a glimpse of what awaits you"),a.setAttribute("id","preview"),t.appendChild(a),insertAfter(t,e),l=document.getElementsByTagName("a");for(var i=0;i<l.length;i++)l[i].onmouseover=function(){var e=this.getAttribute("href");e.indexOf("index.html")!==-1&&moveElement("preview",0,0,5),e.indexOf("about.html")!==-1&&moveElement("preview",-150,0,5),e.indexOf("photos.html")!==-1&&moveElement("preview",-300,0,5),e.indexOf("live.html")!==-1&&moveElement("preview",-450,0,5),e.indexOf("contact.html")!==-1&&moveElement("preview",-600,0,5)}}function stripeTables(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("table"),t=0;t<e.length;t++)for(var n=!1,a=e[t].getElementsByTagName("tr"),l=0;l<a.length;l++)1==n?(addClass(a[l],"odd"),n=!1):n=!0}function highlightRows(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("tr"),t=0;t<e.length;t++)e[t].oldClassName=e[t].className,e[t].onmouseover=function(){addClass(this,"highlight")},e[t].onmouseout=function(){this.className=this.oldClassName}}function displayAbbreviations(){if(!document.getElementsByTagName||!document.createElement||!document.createTextNode)return!1;var e=document.getElementsByTagName("abbr");if(e.length<1)return!1;for(var t=new Array,n=0;n<e.length;n++){var a=e[n];if(!(a.childNodes.length<1)){var l=a.getAttribute("title"),i=a.lastChild.nodeValue;t[i]=l}}var r=document.createElement("dl");for(i in t){var l=t[i],o=document.createElement("dt"),d=document.createTextNode(i);o.appendChild(d);var m=document.createElement("dd"),s=document.createTextNode(l);m.appendChild(s),r.appendChild(o),r.appendChild(m)}if(r.childNodes.length<1)return!1;var u=document.createElement("h3"),c=document.createTextNode("Abbreviations");u.appendChild(c);var g=document.getElementById("content");g.appendChild(u),g.appendChild(r)}function showPic(e){"use strict";var t,n,a,l;return!document.getElementById("placeholder")||(t=e.getAttribute("href"),n=document.getElementById("placeholder"),n.setAttribute("src",t),!!document.getElementById("description")&&(a=e.getAttribute("title")?e.getAttribute("title"):"",l=document.getElementById("description"),3===l.firstChild.nodeType&&(l.firstChild.nodeValue=a),!1))}function preparePlaceholder(){"use strict";var e,t,n,a;return!!document.createElement&&(!!document.createTextNode&&(!!document.getElementById&&(!!document.getElementById("image-gallery")&&(e=document.createElement("img"),e.setAttribute("id","placeholder"),e.setAttribute("src","img/placeholder.gif"),e.setAttribute("alt","my image gallery"),t=document.createElement("p"),t.setAttribute("id","description"),n=document.createTextNode("Choose an image"),t.appendChild(n),a=document.getElementById("image-gallery"),insertAfter(t,a),void insertAfter(e,t)))))}function prepareGallery(){"use strict";var e,t;if(!document.getElementsByTagName)return!1;if(!document.getElementById)return!1;if(!document.getElementById("image-gallery"))return!1;e=document.getElementById("image-gallery"),t=e.getElementsByTagName("a");for(var n=0;n<t.length;n++)t[n].onclick=function(){return showPic(this)}}addLoadEvent(highlightPage),addLoadEvent(prepareInternalNav),addLoadEvent(focusLabels),addLoadEvent(prepareForms),addLoadEvent(prepareSlideshow),addLoadEvent(stripeTables),addLoadEvent(highlightRows),addLoadEvent(displayAbbreviations),addLoadEvent(preparePlaceholder),addLoadEvent(prepareGallery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImluZGV4LmpzIiwibGl2ZS5qcyIsInBob3Rvcy5qcyJdLCJuYW1lcyI6WyJhZGRMb2FkRXZlbnQiLCJmdW5jIiwiY29uc29sZSIsImxvZyIsIm9sZG9ubG9hZCIsIndpbmRvdyIsIm9ubG9hZCIsImluc2VydEFmdGVyIiwibmV3RWxlbWVudCIsInRhcmdldEVsZW1lbnQiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibGFzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsImFkZENsYXNzIiwiZWxlbWVudCIsInZhbHVlIiwiY2xhc3NOYW1lIiwibmV3Q2xhc3NOYW1lIiwiaGlnaGxpZ2h0UGFnZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsIm5hdiIsImxpbmtzIiwiaSIsImxlbmd0aCIsImxpbmt1cmwiLCJnZXRBdHRyaWJ1dGUiLCJjdXJyZW50dXJsIiwibG9jYXRpb24iLCJocmVmIiwiaW5kZXhPZiIsImxpbmt0ZXh0Iiwibm9kZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJib2R5Iiwic2V0QXR0cmlidXRlIiwic2hvd1NlY3Rpb24iLCJpZCIsImRpdnMiLCJzdHlsZSIsImRpc3BsYXkiLCJwcmVwYXJlSW50ZXJuYWxOYXYiLCJzZWN0aW9uSWQiLCJzcGxpdCIsImRlc3RpbmF0aW9uIiwib25jbGljayIsInRoaXMiLCJmb2N1c0xhYmVscyIsImxhYmVscyIsImZvY3VzIiwicmVzZXRGaWVsZHMiLCJ3aGljaGZvcm0iLCJlbGVtZW50cyIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJvbmZvY3VzIiwib25ibHVyIiwidmFsaWRhdGVGb3JtIiwiaXNGaWxsZWQiLCJhbGVydCIsIm5hbWUiLCJpc0VtYWlsIiwiZmllbGQiLCJwcmVwYXJlRm9ybXMiLCJmb3JtcyIsInRoaXNmb3JtIiwib25zdWJtaXQiLCJtb3ZlRWxlbWVudCIsImVsZW1lbnRJRCIsImZpbmFsWCIsImZpbmFsWSIsImludGVydmFsIiwiZWxlbSIsInhQb3MiLCJ5UG9zIiwiZGlzdCIsInJlcGVhdCIsIm1vdmVtZW50IiwiY2xlYXJUaW1lb3V0IiwibGVmdCIsInRvcCIsInBhcnNlSW50IiwiTWF0aCIsImNlaWwiLCJzZXRUaW1lb3V0IiwicHJlcGFyZVNsaWRlc2hvdyIsImludHJvIiwic2xpZGVzaG93IiwiZnJhbWUiLCJwcmV2aWV3IiwiY3JlYXRlRWxlbWVudCIsIm9ubW91c2VvdmVyIiwic3RyaXBlVGFibGVzIiwidGFibGVzIiwib2RkIiwicm93cyIsImoiLCJoaWdobGlnaHRSb3dzIiwib2xkQ2xhc3NOYW1lIiwib25tb3VzZW91dCIsImRpc3BsYXlBYmJyZXZpYXRpb25zIiwiY3JlYXRlVGV4dE5vZGUiLCJhYmJyZXZpYXRpb25zIiwiZGVmcyIsIkFycmF5IiwiY3VycmVudF9hYmJyIiwiY2hpbGROb2RlcyIsImRlZmluaXRpb24iLCJrZXkiLCJkbGlzdCIsImR0aXRsZSIsImR0aXRsZV90ZXh0IiwiZGRlc2MiLCJkZGVzY190ZXh0IiwiaGVhZGVyIiwiaGVhZGVyX3RleHQiLCJjb250YWluZXIiLCJzaG93UGljIiwid2hpY2hwaWMiLCJzb3VyY2UiLCJwbGFjZWhvbGRlciIsInRleHQiLCJkZXNjcmlwdGlvbiIsImZpcnN0Q2hpbGQiLCJub2RlVHlwZSIsInByZXBhcmVQbGFjZWhvbGRlciIsImRlc2NUZXh0IiwiZ2FsbGVyeSIsInByZXBhcmVHYWxsZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxjQUFBQyxHQUNBQyxRQUFBQyxJQUFBLE9BQ0EsSUFBQUMsR0FBQUMsT0FBQUMsTUFDQSxtQkFBQUQsUUFBQUMsT0FDQUQsT0FBQUMsT0FBQUwsRUFFQUksT0FBQUMsT0FBQSxXQUNBRixJQUNBSCxLQUtBLFFBQUFNLGFBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsVUFDQUQsR0FBQUUsV0FBQUgsRUFDQUMsRUFBQUcs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Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFkZExvYWRFdmVudCggZnVuYyApIHtcbiAgY29uc29sZS5sb2coJ293ZXcnKTtcbiAgdmFyIG9sZG9ubG9hZCA9IHdpbmRvdy5vbmxvYWQ7XG4gIGlmICggdHlwZW9mIHdpbmRvdy5vbmxvYWQgIT0gJ2Z1bmN0aW9uJyApIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuYztcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBvbGRvbmxvYWQoKTtcbiAgICAgIGZ1bmMoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoIG5ld0VsZW1lbnQsIHRhcmdldEVsZW1lbnQgKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudE5vZGU7XG4gIGlmICggcGFyZW50Lmxhc3RDaGlsZCA9PSB0YXJnZXRFbGVtZW50ICkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCggbmV3RWxlbWVudCApO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoIG5ld0VsZW1lbnQsIHRhcmdldEVsZW1lbnQubmV4dFNpYmxpbmcgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyggZWxlbWVudCwgdmFsdWUgKSB7XG4gIGlmICggIWVsZW1lbnQuY2xhc3NOYW1lICkge1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgbmV3Q2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7XG4gICAgbmV3Q2xhc3NOYW1lICs9IFwiIFwiO1xuICAgIG5ld0NsYXNzTmFtZSArPSB2YWx1ZTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IG5ld0NsYXNzTmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRQYWdlKCkge1xuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSApIHJldHVybiBmYWxzZTtcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKSByZXR1cm4gZmFsc2U7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcIm5hdmlnYXRpb25cIiApICkgcmV0dXJuIGZhbHNlO1xuICB2YXIgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwibmF2aWdhdGlvblwiICk7XG4gIHZhciBsaW5rcyA9IG5hdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJhXCIgKTtcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIGxpbmt1cmwgPSBsaW5rc1sgaSBdLmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKTtcbiAgICB2YXIgY3VycmVudHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGlmICggY3VycmVudHVybC5pbmRleE9mKCBsaW5rdXJsICkgIT0gLTEgKSB7XG4gICAgICBsaW5rc1sgaSBdLmNsYXNzTmFtZSA9IFwiaGVyZVwiO1xuICAgICAgdmFyIGxpbmt0ZXh0ID0gbGlua3NbIGkgXS5sYXN0Q2hpbGQubm9kZVZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSggXCJpZFwiLCBsaW5rdGV4dCApO1xuICAgIH1cbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoIGhpZ2hsaWdodFBhZ2UgKTtcbiIsImZ1bmN0aW9uIHNob3dTZWN0aW9uKCBpZCApIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBjb25zb2xlLmxvZygndGVzdCcpO1xuICB2YXIgZGl2cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnZGl2JyApO1xuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBkaXZzLmxlbmd0aDsgaSsrICkge1xuICAgIGlmICggZGl2c1sgaSBdLmNsYXNzTmFtZS5pbmRleE9mKCAnc2VjdGlvbicgKSA9PT0gLTEgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKCBkaXZzWyBpIF0uZ2V0QXR0cmlidXRlKCAnaWQnICkgIT09IGlkICkge1xuICAgICAgZGl2c1sgaSBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpdnNbIGkgXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlcGFyZUludGVybmFsTmF2KCkge1xuICAndXNlIHN0cmljdCc7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdpbnRlcm5hbC1uYXYnICkgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBuYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ludGVybmFsLW5hdicgKTtcbiAgdmFyIGxpbmtzID0gbmF2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYScgKTtcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIHNlY3Rpb25JZCA9IGxpbmtzWyBpIF0uZ2V0QXR0cmlidXRlKCAnaHJlZicgKS5zcGxpdCggJyMnIClbIDEgXTtcbiAgICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggc2VjdGlvbklkICkgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHNlY3Rpb25JZCApLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgbGlua3NbIGkgXS5kZXN0aW5hdGlvbiA9IHNlY3Rpb25JZDtcbiAgICBsaW5rc1sgaSBdLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNob3dTZWN0aW9uKCB0aGlzLmRlc3RpbmF0aW9uICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoIHByZXBhcmVJbnRlcm5hbE5hdiApO1xuIiwiZnVuY3Rpb24gZm9jdXNMYWJlbHMoKSB7XG4gIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGxhYmVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGFiZWxcIik7XG4gIGZvciAodmFyIGk9MDsgaTxsYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIWxhYmVsc1tpXS5nZXRBdHRyaWJ1dGUoXCJmb3JcIikpIGNvbnRpbnVlO1xuICAgIGxhYmVsc1tpXS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaWQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImZvclwiKTtcbiAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzZXRGaWVsZHMod2hpY2hmb3JtKSB7XG4gIGZvciAodmFyIGk9MDsgaTx3aGljaGZvcm0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZWxlbWVudCA9IHdoaWNoZm9ybS5lbGVtZW50c1tpXTtcbiAgICBpZiAoZWxlbWVudC50eXBlID09IFwic3VibWl0XCIpIGNvbnRpbnVlO1xuICAgIGlmICghZWxlbWVudC5kZWZhdWx0VmFsdWUpIGNvbnRpbnVlO1xuICAgIGVsZW1lbnQub25mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnZhbHVlID09IHRoaXMuZGVmYXVsdFZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50Lm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMudmFsdWUgPT0gXCJcIikge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRm9ybSh3aGljaGZvcm0pIHtcbiAgZm9yICh2YXIgaT0wOyBpPHdoaWNoZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbGVtZW50ID0gd2hpY2hmb3JtLmVsZW1lbnRzW2ldO1xuICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKFwicmVxdWlyZWRcIikgIT0gLTEpIHtcbiAgICAgIGlmICghaXNGaWxsZWQoZWxlbWVudCkpIHtcbiAgICAgICAgYWxlcnQoXCJQbGVhc2UgZmlsbCBpbiB0aGUgXCIrZWxlbWVudC5uYW1lK1wiIGZpZWxkLlwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZihcImVtYWlsXCIpICE9IC0xKSB7XG4gICAgICBpZiAoIWlzRW1haWwoZWxlbWVudCkpIHtcbiAgICAgICAgYWxlcnQoXCJUaGUgXCIrZWxlbWVudC5uYW1lK1wiIGZpZWxkIG11c3QgYmUgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNGaWxsZWQoZmllbGQpIHtcbiAgaWYgKGZpZWxkLnZhbHVlLmxlbmd0aCA8IDEgfHwgZmllbGQudmFsdWUgPT0gZmllbGQuZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRW1haWwoZmllbGQpIHtcbiAgaWYgKGZpZWxkLnZhbHVlLmluZGV4T2YoXCJAXCIpID09IC0xIHx8IGZpZWxkLnZhbHVlLmluZGV4T2YoXCIuXCIpID09IC0xKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVGb3JtcygpIHtcbiAgZm9yICh2YXIgaT0wOyBpPGRvY3VtZW50LmZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRoaXNmb3JtID0gZG9jdW1lbnQuZm9ybXNbaV07XG4gICAgcmVzZXRGaWVsZHModGhpc2Zvcm0pO1xuICAgIHRoaXNmb3JtLm9uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVGb3JtKHRoaXMpO1xuICAgIH1cbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoZm9jdXNMYWJlbHMpO1xuYWRkTG9hZEV2ZW50KHByZXBhcmVGb3Jtcyk7IiwiZnVuY3Rpb24gbW92ZUVsZW1lbnQoIGVsZW1lbnRJRCwgZmluYWxYLCBmaW5hbFksIGludGVydmFsICkge1xuICAndXNlIHN0cmljdCc7XG4gIHZhciBlbGVtLCB4UG9zLCB5UG9zLCBkaXN0LCByZXBlYXQ7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggZWxlbWVudElEICkgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggZWxlbWVudElEICk7XG4gIGlmICggZWxlbS5tb3ZlbWVudCApIHtcbiAgICBjbGVhclRpbWVvdXQoIGVsZW0ubW92ZW1lbnQgKTtcbiAgfVxuICBpZiAoICFlbGVtLnN0eWxlLmxlZnQgKSB7XG4gICAgZWxlbS5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gIH1cbiAgaWYgKCAhZWxlbS5zdHlsZS50b3AgKSB7XG4gICAgZWxlbS5zdHlsZS50b3AgPSAnMHB4JztcbiAgfVxuICB4UG9zID0gcGFyc2VJbnQoIGVsZW0uc3R5bGUubGVmdCApO1xuICB5UG9zID0gcGFyc2VJbnQoIGVsZW0uc3R5bGUudG9wICk7XG4gIGlmICggeFBvcyA9PT0gZmluYWxYICYmIHlQb3MgPT09IGZpbmFsWSApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIHhQb3MgPCBmaW5hbFggKSB7XG4gICAgZGlzdCA9IE1hdGguY2VpbCggKCBmaW5hbFggLSB4UG9zICkgLyAxMCApO1xuICAgIHhQb3MgPSB4UG9zICsgZGlzdDtcbiAgfVxuICBpZiAoIHhQb3MgPiBmaW5hbFggKSB7XG4gICAgZGlzdCA9IE1hdGguY2VpbCggKCB4UG9zIC0gZmluYWxYICkgLyAxMCApO1xuICAgIHhQb3MgPSB4UG9zIC0gZGlzdDtcbiAgfVxuICBpZiAoIHlQb3MgPCBmaW5hbFkgKSB7XG4gICAgZGlzdCA9IE1hdGguY2VpbCggKCBmaW5hbFkgLSB5UG9zICkgLyAxMCApO1xuICAgIHlQb3MgPSB5UG9zICsgZGlzdDtcbiAgfVxuICBpZiAoIHlQb3MgPiBmaW5hbFkgKSB7XG4gICAgZGlzdCA9IE1hdGguY2VpbCggKCB5UG9zIC0gZmluYWxZICkgLyAxMCApO1xuICAgIHlQb3MgPSB5UG9zIC0gZGlzdDtcbiAgfVxuICBlbGVtLnN0eWxlLmxlZnQgPSB4UG9zICsgJ3B4JztcbiAgZWxlbS5zdHlsZS50b3AgPSB5UG9zICsgJ3B4JztcbiAgcmVwZWF0ID0gXCJtb3ZlRWxlbWVudCgnXCIgKyBlbGVtZW50SUQgKyBcIicsXCIgKyBmaW5hbFggKyBcIixcIiArIGZpbmFsWSArIFwiLFwiICsgaW50ZXJ2YWwgKyBcIilcIjtcbiAgZWxlbS5tb3ZlbWVudCA9IHNldFRpbWVvdXQoIHJlcGVhdCwgaW50ZXJ2YWwgKTtcbn1cblxuZnVuY3Rpb24gcHJlcGFyZVNsaWRlc2hvdygpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgaW50cm8sIHNsaWRlc2hvdywgZnJhbWUsIHByZXZpZXcsIGxpbmtzO1xuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcImludHJvXCIgKSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaW50cm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ludHJvJyApO1xuICBzbGlkZXNob3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xuICBzbGlkZXNob3cuc2V0QXR0cmlidXRlKCAnaWQnLCAnc2xpZGVzaG93JyApO1xuICBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdpbWcnICk7XG4gIGZyYW1lLnNldEF0dHJpYnV0ZSggJ3NyYycsICdpbWcvZnJhbWUuZ2lmJyApO1xuICBmcmFtZS5zZXRBdHRyaWJ1dGUoICdhbHQnLCAnJyApO1xuICBmcmFtZS5zZXRBdHRyaWJ1dGUoICdpZCcsICdmcmFtZScgKTtcbiAgc2xpZGVzaG93LmFwcGVuZENoaWxkKCBmcmFtZSApO1xuICBwcmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2ltZycgKTtcbiAgcHJldmlldy5zZXRBdHRyaWJ1dGUoICdzcmMnLCAnaW1nL3NsaWRlc2hvdy5naWYnICk7XG4gIHByZXZpZXcuc2V0QXR0cmlidXRlKCAnYWx0JywgJ2EgZ2xpbXBzZSBvZiB3aGF0IGF3YWl0cyB5b3UnICk7XG4gIHByZXZpZXcuc2V0QXR0cmlidXRlKCAnaWQnLCAncHJldmlldycgKTtcbiAgc2xpZGVzaG93LmFwcGVuZENoaWxkKCBwcmV2aWV3ICk7XG4gIGluc2VydEFmdGVyKCBzbGlkZXNob3csIGludHJvICk7XG4gIGxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdhJyApO1xuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKyApIHtcbiAgICBsaW5rc1sgaSBdLm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmdldEF0dHJpYnV0ZSggJ2hyZWYnICk7XG4gICAgICBpZiAoIGRlc3RpbmF0aW9uLmluZGV4T2YoICdpbmRleC5odG1sJyApICE9PSAtMSApIHtcbiAgICAgICAgbW92ZUVsZW1lbnQoICdwcmV2aWV3JywgMCwgMCwgNSApO1xuICAgICAgfVxuICAgICAgaWYgKCBkZXN0aW5hdGlvbi5pbmRleE9mKCAnYWJvdXQuaHRtbCcgKSAhPT0gLTEgKSB7XG4gICAgICAgIG1vdmVFbGVtZW50KCAncHJldmlldycsIC0xNTAsIDAsIDUgKTtcbiAgICAgIH1cbiAgICAgIGlmICggZGVzdGluYXRpb24uaW5kZXhPZiggJ3Bob3Rvcy5odG1sJyApICE9PSAtMSApIHtcbiAgICAgICAgbW92ZUVsZW1lbnQoICdwcmV2aWV3JywgLTMwMCwgMCwgNSApO1xuICAgICAgfVxuICAgICAgaWYgKCBkZXN0aW5hdGlvbi5pbmRleE9mKCAnbGl2ZS5odG1sJyApICE9PSAtMSApIHtcbiAgICAgICAgbW92ZUVsZW1lbnQoICdwcmV2aWV3JywgLTQ1MCwgMCwgNSApO1xuICAgICAgfVxuICAgICAgaWYgKCBkZXN0aW5hdGlvbi5pbmRleE9mKCAnY29udGFjdC5odG1sJyApICE9PSAtMSApIHtcbiAgICAgICAgbW92ZUVsZW1lbnQoICdwcmV2aWV3JywgLTYwMCwgMCwgNSApO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuYWRkTG9hZEV2ZW50KCBwcmVwYXJlU2xpZGVzaG93ICk7XG4iLCJmdW5jdGlvbiBzdHJpcGVUYWJsZXMoKSB7XG4gIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHJldHVybiBmYWxzZTtcbiAgdmFyIHRhYmxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGFibGVcIik7XG4gIGZvciAodmFyIGk9MDsgaTx0YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb2RkID0gZmFsc2U7XG4gICAgdmFyIHJvd3MgPSB0YWJsZXNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0clwiKTtcbiAgICBmb3IgKHZhciBqPTA7IGo8cm93cy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKG9kZCA9PSB0cnVlKSB7XG4gICAgICAgIGFkZENsYXNzKHJvd3Nbal0sXCJvZGRcIik7XG4gICAgICAgIG9kZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2RkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaGlnaGxpZ2h0Um93cygpIHtcbiAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSByZXR1cm4gZmFsc2U7XG4gIHZhciByb3dzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0clwiKTtcbiAgZm9yICh2YXIgaT0wOyBpPHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICByb3dzW2ldLm9sZENsYXNzTmFtZSA9IHJvd3NbaV0uY2xhc3NOYW1lXG4gICAgcm93c1tpXS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgYWRkQ2xhc3ModGhpcyxcImhpZ2hsaWdodFwiKTtcbiAgICB9XG4gICAgcm93c1tpXS5vbm1vdXNlb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMub2xkQ2xhc3NOYW1lXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlBYmJyZXZpYXRpb25zKCkge1xuICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lIHx8ICFkb2N1bWVudC5jcmVhdGVFbGVtZW50IHx8ICFkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgYWJicmV2aWF0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYWJiclwiKTtcbiAgaWYgKGFiYnJldmlhdGlvbnMubGVuZ3RoIDwgMSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgZGVmcyA9IG5ldyBBcnJheSgpO1xuICBmb3IgKHZhciBpPTA7IGk8YWJicmV2aWF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjdXJyZW50X2FiYnIgPSBhYmJyZXZpYXRpb25zW2ldO1xuICAgIGlmIChjdXJyZW50X2FiYnIuY2hpbGROb2Rlcy5sZW5ndGggPCAxKSBjb250aW51ZTtcbiAgICB2YXIgZGVmaW5pdGlvbiA9IGN1cnJlbnRfYWJici5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKTtcbiAgICB2YXIga2V5ID0gY3VycmVudF9hYmJyLmxhc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgZGVmc1trZXldID0gZGVmaW5pdGlvbjtcbiAgfVxuICB2YXIgZGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGxcIik7XG4gIGZvciAoa2V5IGluIGRlZnMpIHtcbiAgICB2YXIgZGVmaW5pdGlvbiA9IGRlZnNba2V5XTtcbiAgICB2YXIgZHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImR0XCIpO1xuICAgIHZhciBkdGl0bGVfdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGtleSk7XG4gICAgZHRpdGxlLmFwcGVuZENoaWxkKGR0aXRsZV90ZXh0KTtcbiAgICB2YXIgZGRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGRcIik7XG4gICAgdmFyIGRkZXNjX3RleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkZWZpbml0aW9uKTtcbiAgICBkZGVzYy5hcHBlbmRDaGlsZChkZGVzY190ZXh0KTtcbiAgICBkbGlzdC5hcHBlbmRDaGlsZChkdGl0bGUpO1xuICAgIGRsaXN0LmFwcGVuZENoaWxkKGRkZXNjKTtcbiAgfVxuICBpZiAoZGxpc3QuY2hpbGROb2Rlcy5sZW5ndGggPCAxKSByZXR1cm4gZmFsc2U7XG4gIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gIHZhciBoZWFkZXJfdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiQWJicmV2aWF0aW9uc1wiKTtcbiAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlcl90ZXh0KTtcbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkbGlzdCk7XG59XG5cbmFkZExvYWRFdmVudChzdHJpcGVUYWJsZXMpO1xuYWRkTG9hZEV2ZW50KGhpZ2hsaWdodFJvd3MpO1xuYWRkTG9hZEV2ZW50KGRpc3BsYXlBYmJyZXZpYXRpb25zKTsiLCJmdW5jdGlvbiBzaG93UGljKCB3aGljaHBpYyApIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgc291cmNlLCBwbGFjZWhvbGRlciwgdGV4dCwgZGVzY3JpcHRpb247XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAncGxhY2Vob2xkZXInICkgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgc291cmNlID0gd2hpY2hwaWMuZ2V0QXR0cmlidXRlKCAnaHJlZicgKTtcbiAgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3BsYWNlaG9sZGVyJyApO1xuICBwbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoICdzcmMnLCBzb3VyY2UgKTtcbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdkZXNjcmlwdGlvbicgKSApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCB3aGljaHBpYy5nZXRBdHRyaWJ1dGUoICd0aXRsZScgKSApIHtcbiAgICB0ZXh0ID0gd2hpY2hwaWMuZ2V0QXR0cmlidXRlKCAndGl0bGUnICk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dCA9ICcnO1xuICB9XG4gIGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdkZXNjcmlwdGlvbicgKTtcbiAgaWYgKCBkZXNjcmlwdGlvbi5maXJzdENoaWxkLm5vZGVUeXBlID09PSAzICkge1xuICAgIGRlc2NyaXB0aW9uLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gdGV4dDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVQbGFjZWhvbGRlcigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgcGxhY2Vob2xkZXIsIGRlc2NyaXB0aW9uLCBkZXNjVGV4dCwgZ2FsbGVyeTtcbiAgaWYgKCAhZG9jdW1lbnQuY3JlYXRlRWxlbWVudCApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2ltYWdlLWdhbGxlcnknICkgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2ltZycgKTtcbiAgcGxhY2Vob2xkZXIuc2V0QXR0cmlidXRlKCAnaWQnLCAncGxhY2Vob2xkZXInICk7XG4gIHBsYWNlaG9sZGVyLnNldEF0dHJpYnV0ZSggJ3NyYycsICdpbWcvcGxhY2Vob2xkZXIuZ2lmJyApO1xuICBwbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoICdhbHQnLCAnbXkgaW1hZ2UgZ2FsbGVyeScgKTtcbiAgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAncCcgKTtcbiAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCAnaWQnLCAnZGVzY3JpcHRpb24nICk7XG4gIGRlc2NUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoICdDaG9vc2UgYW4gaW1hZ2UnICk7XG4gIGRlc2NyaXB0aW9uLmFwcGVuZENoaWxkKCBkZXNjVGV4dCApO1xuICBnYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdpbWFnZS1nYWxsZXJ5JyApO1xuICBpbnNlcnRBZnRlciggZGVzY3JpcHRpb24sIGdhbGxlcnkgKTtcbiAgaW5zZXJ0QWZ0ZXIoIHBsYWNlaG9sZGVyLCBkZXNjcmlwdGlvbiApO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlR2FsbGVyeSgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgZ2FsbGVyeSwgbGlua3M7XG4gIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdpbWFnZS1nYWxsZXJ5JyApICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBnYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdpbWFnZS1nYWxsZXJ5JyApO1xuICBsaW5rcyA9IGdhbGxlcnkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdhJyApO1xuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKyApIHtcbiAgICBsaW5rc1sgaSBdLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzaG93UGljKCB0aGlzICk7XG4gICAgfTtcbiAgfVxufVxuXG5hZGRMb2FkRXZlbnQoIHByZXBhcmVQbGFjZWhvbGRlciApO1xuYWRkTG9hZEV2ZW50KCBwcmVwYXJlR2FsbGVyeSApO1xuIl19
